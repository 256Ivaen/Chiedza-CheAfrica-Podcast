RewriteEngine On

# Security - prevent direct access to PHP files
RewriteCond %{THE_REQUEST} /public/([^\s?]*)\.php [NC]
RewriteRule ^ %1 [R=301,L]

# Handle clean URLs and API routes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ public/index.php [QSA,L]